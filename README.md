# MyBISTU
# MyBISTU
MyBISTU后端介绍：

MyBISTU后端使用Python的Flask开源框架，用来接收和发送数据。

总体实现了以下功能：

1.接收前端上传的账号密码，模拟登录教务处。

2.实现课表的爬取，获取用户的课表信息。

3.实现成绩的查询，获取用户的成绩信息。

4.实现考试的查询，获取用户的考试信息。

5.获取用户姓名，专业等信息。

技术描述：

1.使用了阿里云的服务器，部署Python3环境，使用PyCharm作为编译器，运行WSGI程序，用来监听固定端口和设置路由。由于服务器同时作为小程序后

端，所以配置了证书和域名，通过https协议加密传输，保证了用户数据的安全。

2.服务器使用了IP代理。由于学校教务处网站只能通过校园网访问，因此可以通过使用VPN和代理的方式实现内网访问。经论证和检测，使用VPN并不是

高效、稳定的方式，使用VPN时间过长会自动断开，导致后端不够稳定。并且，使用固定IP一直使用同一VPN登录会被教务网站隔离。考虑到期末、开学

等时间访问量峰值高，比较集中的问题，没有使用VPN进行内网穿透。

使用了内网的路由器进行反向代理，使用的开源的frp程序，在服务端设置代理IP，配置相关端口，并且在校内的路由器开启frpc程序，与服务端的frps

的相关配置对应，所以每次的登录请求都会被转发到路由器端，由路由器发送请求，转发数据。因此，实现了稳定、高速的内网穿透。

3.使用了在线打码平台的API进行验证码识别。因为机器学习方法进行验证码识别的速度慢，效率和准确度低，且服务器的配置不足以训练和使用相关模型。所以使用了方便、高效的验证码在线识别API。

4.使用了Fiddler工具对登录过程进行抓包。然后使用Python的requests构造session开启与教务处服务器的会话，进行登录。接收前端上传的账号密

码，模拟请求头，构造表单进行登录。然后使用Python爬虫分别爬取考试，成绩，课表等信息。进行数据的格式化，JSON化，并将数据返回前端。进行

登录和网络的错误检测，搭建友好的后端。



后端使用手册：

1.设置相关端口等配置信息，启动frps代理程序，在浏览器中设置代理，不对本地网站使用代理。

2.配置Python环境，安装要用到的依赖包。

3.启动hello程序。


